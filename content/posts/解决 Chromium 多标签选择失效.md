---
title: 解决 Chromium 多标签选择失效
summary: 排查并解决 Chromium 无法使用 Ctrl 加左键点击多选标签的问题
date: 2024-03-09
tags: ["杂症笔记"]
draft: false
---
## 描述与结论
### 问题描述
我使用的 ungoogled-chromium 不知何时无法通过 ctrl 加鼠标左键点击进行标签页的多选。
### 结论
由 `chrome://flags` 中的实验性设置项 `#windows11-mica-titlebar` 导致。
这个选项的作用是为 chrome 提供符合 Windows 11的毛玻璃效果（不太明显）。
关掉即可。

## 排查过程
当希望通过不同的浏览器窗口区分不同工作内容的时候，我知道这个问题不得不解决了。
### 搜索
1. 中文 Google：`Chromium 无法 多选 标签页`。
	-  没有相关答案。中文 Google 的默认搜索质量也越来越差了。
2. 使用 `site` 语法搜索 v2ex，zhihu 等站点。
	-  没有相关问题。
3. 翻看 ungoogled-chromium 的 issue：无果。
4. 找到 chrome-discuss 论坛：无果。
5. 换用英文搜索：Chromium cannot select multiple tabs
	-  reddit 等社区有类似问题，但没有合适的解答。
6. 搜索 Stack Overflow 等站点，没有相关问题。
### 动手
以上情况都找不到丝毫线索，这是很少见的。
这说明我遇到的问题并非普遍性问题，很可能与我自己的设置有关，那只好自己动手排查了。

我首先下载了原版的 ungoogled-chromium，将老配置文件备份，建立全新的配置文件，发现是可以多选的。那可以确定问题出在我的配置。

但究竟是某些设置项的问题，还是长期使用缓存积累导致的问题呢？

个人用户的大部分数据都保存在 `%localappdata%\Chromium\User Data\Default` 下，同时部分浏览器设置保存在 `%localappdata%\Chromium\User Data` 下。使用原始配置目录和新建立的配置目录进行替换实验，确定 `default` 文件夹没问题，那应该是浏览器本身的某些设置不对。

依次替换，最终确定问题出在 `%localappdata%\Chromium\User Data\Local State` 文件，这个文件记录浏览器本身的一些配置。进一步逐行对比，最终确定问题是 `#windows11-mica-titlebar` 导致。
## 方法和经验总结

本次最终采用的方法是完全的从实验入手。

估计可能出问题的地方，逐步通过实验来缩小范围，最终确定原因。

需要考虑的问题包括：
1. 怎样估计问题的初始范围？
2. 每一步的实验怎么做？

如果假设整个系统中的每个部分具有一定的独立性，例如：
- 微信的设置变动不会影响到浏览器的状态。
- 浏览器的某个表现是由单独的文件和单独的设置项决定的，而不是两个文件共通作用。
那么控制变量法就比较有用。

与生活不同，幸好在计算机上，大部分时间这些前提都能满足。

常用的另一种方法是估计问题相关的主题，查阅文档。